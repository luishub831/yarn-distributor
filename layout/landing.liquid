<!doctype html>
<html class='no-js' lang='{{ request.locale.iso_code }}'>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width,initial-scale=1'>
    <meta name='theme-color' content='{{ settings.default_color_scheme }}'>
    {%- if page_description -%}
      <meta name='description' content='{{ page_description | escape }}'>
    {%- endif -%}
    {%- if settings.favicon != blank -%}
      <link rel='icon' type='image/png' href='{{ settings.favicon | image_url: width: 32, height: 32 }}'>
    {%- endif -%}
    {% render 'meta-tags' %}
    <link rel='canonical' href='{{ canonical_url }}'>
    <link rel='preconnect' href='https://cdn.shopify.com' crossorigin>
    <link rel='preconnect' href='https://fonts.shopifycdn.com' crossorigin>

<script>const ensureInstantJS=()=>{window.InstantJS||(window.InstantJS={}),window.InstantJS.track||(window.InstantJS.trackQueue=[],window.InstantJS.track=function(){window.InstantJS.trackQueue.push(arguments)})};ensureInstantJS();const trackEvent=(()=>{const t=new Set;return e=>{const n=JSON.stringify(e);t.has(n)||!e[0].includes("track")||(t.add(n),window.InstantJS.track("MARKETING_PIXEL_EVENT_FIRED",[{event:e,provider:"META_PLATFORMS"}]))}})();(function(){const e=()=>{if(window.fbq?.callMethod){const t=window.fbq,e=function(){trackEvent([...arguments]),t.apply(this,arguments)};for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);window.fbq=e}else setTimeout(e,1)},t=()=>{const{_fbq:e}=window;if(e&&e.queue){e.queue.forEach(t=>trackEvent([...t]));const n=e.queue.push;e.queue.push=function(...t){trackEvent([...t[0]]);return n.apply(e.queue,t)}}else setTimeout(t,1)};e(),t()})();</script>
    
    <title>
      {{ page_title }}
      {%- if current_tags %}
        &ndash; tagged "{{ current_tags | join: ', ' }}"
      {%- endif -%}
      {%- if current_page != 1 %} &ndash; Page {{ current_page }}{% endif -%}
      {%- unless page_title contains shop.name %}
        &ndash; {{ shop.name -}}
      {%- endunless -%}
    </title>

    {% render 'css-variables' %}
    {{ 'index.js' | asset_url | preload_tag: as: 'script' }}
    {{ 'index.css' | asset_url | stylesheet_tag: preload: true }}
    {% render 'fonts' %}
    {{ content_for_header }}
   <script src="{{ 'jquery.min.js' | asset_url }}"></script>
   <script>
      (function(h,o,t,j,a,r){
          h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
          h._hjSettings={hjid:3916316,hjsv:6};
          a=o.getElementsByTagName('head')[0];
          r=o.createElement('script');r.async=1;
          r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
          a.appendChild(r);
      })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
  </script>
  <!-- Start of HubSpot Embed Code -->
  <script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/5189439.js"></script>
  <!-- End of HubSpot Embed Code -->
  {% render 'gp-head' %}
  <script type="text/javascript">
    !function(a,b){if(!a.__kla){a.__kla=function(){a.__kla.q.push(arguments)};a.__kla.q=[];var c=b.createElement("script");c.async=!0;c.type="text/javascript";c.src="https://static.klaviyo.com/onsite/js/klaviyo.js?company_id=WFmueX";var d=b.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)}}(window,document);
  </script>  


   <script src="{{ 'custom-script.js' | asset_url }}"></script>
    <script>
      (function(){
        history.scrollRestoration = "manual";
        
        function forceTop(){
          window.scrollTo(0,0);
        }
        
        forceTop();
        
        if(location.pathname.indexOf('/collections/')>-1){
          var scrollInterval = setInterval(forceTop,100);
          setTimeout(function(){
            clearInterval(scrollInterval);
          },2000);
        }
        
        window.addEventListener('DOMContentLoaded',forceTop);
        window.addEventListener('load',forceTop);
      })();
     </script>  
</head>
  <body class='landing-page color-{{ settings.default_color_scheme }} theme-with-{{ settings.edge_rounding_degree }}-rounded-style {% if settings.edge_rounding_degree != 'none' %} theme-with-rounded-style{% endif %}'>
    {% if template.name == 'password' %}
      {% sections 'password-header-group' %}
    {% else %}
      {% sections 'main-header-group' %}
      {% sections 'main-aside-group' %}
    {% endif %}

    <main>
      {{ content_for_layout }}
    </main>

    

    {%- if settings.show_back_to_top_button -%}
      {% render 'back-to-top-button' %}
    {%- endif -%}

    <div class='body-overlay' id='BodyOverlay'></div>

    {%- render 'dialog-components' -%}

    {%- render 'inject-routes' -%}

    <div id='Portal'></div>
   
    <script>
      document.documentElement.className = document.documentElement.className.replace('no-js', 'js')

      if (Shopify.designMode) {
        document.documentElement.className = `${document.documentElement.className} is-editor-mode`
      }

      window.lazySizesConfig = {
        loadMode: 1,
      }
    </script>

     <script>
      document.addEventListener("DOMContentLoaded", () => {
        console.log("CODE EXECUTED");

        // Event Delegation for dynamically loaded elements
        document.body.addEventListener("change", function(event) {
            let swatch = event.target.closest(".CPCSB .custom-colour-swatch");
            if (!swatch) return;

            let imageSrc = swatch.getAttribute("main-image-src");
            let secondaryImageSrc = swatch.getAttribute("secondary-image-src");
            console.log(imageSrc);

            let productCardDetails = swatch.closest(".product-card__details");
            let productCard = productCardDetails?.previousElementSibling?.closest(".product-card");
            
            if (!productCard) return;

            let productSlide = productCard.querySelector(".product-card__carousel .first-slide-custom-swatch .product-card__img");
            if (productSlide) {
                productSlide.setAttribute("src", imageSrc);
                productSlide.removeAttribute("srcset");
            }

            if(secondaryImageSrc){
              let productSecSlide = productCard.querySelector(".product-card__carousel .second-slide-custom-swatch .product-card__img");
              if (productSecSlide) {
                  productSecSlide.setAttribute("src", secondaryImageSrc);
                  productSecSlide.removeAttribute("srcset");
              }
            }

            if(secondaryImageSrc){
              let secondaryImage = productCard.querySelector(".product-card__img.secondary-media-image");
              if (secondaryImage) {
                  secondaryImage.setAttribute("src", secondaryImageSrc);
                  secondaryImage.removeAttribute("srcset");
              }
            }else{
              let secondaryImage = productCard.querySelector(".product-card__img.secondary-media-image");
                if (secondaryImage) {
                    secondaryImage.setAttribute("src", imageSrc);
                    secondaryImage.removeAttribute("srcset");
                }
            }
            
            if(imageSrc){
              let primaryImage = productCard.querySelector(".product-card__img.primary-media-image");
              if (primaryImage) {
                  primaryImage.setAttribute("src", imageSrc);
                  primaryImage.removeAttribute("srcset");
              }
            }

            let firstDot = productCard.querySelector(".product-card-dots__dot[data-dot-index='0']");
            if (firstDot) firstDot.click();
        });

        // Ensure productDefaultSwatches are triggered correctly
        setTimeout(() => {
            let productDefaultSwatches = document.querySelectorAll(".CPCSB .productDefaultSwatch");
            productDefaultSwatches.forEach(productDefaultSwatch => productDefaultSwatch.click());
        }, 1000); // Delay to allow elements to be added to the DOM
      });
    </script>
    
    <script src='{{ 'index.js' | asset_url }}' defer='defer'></script>
  
{% render 'special-offers' %}

{% render 'imp_include' %}
{% render 'upload-script' %}
{% render 'upload-script-bc' %}
{% if content_for_header contains 'bss-b2b-cp' %}{% endif %}</body>
</html>

<script>
    // setTimeout(() => {
    //   let button = document.querySelector('product-form .product-form__btns [type="submit"]')
    //   if(button) {
    //       button.addEventListener("click", () => {
    //           setTimeout(() => {
    //               BSS_B2B.handleCartCheckoutBtn(JSON.parse($('#bss-b2b-store-data').html()))
    //           }, 2000)
    //       })
    //   }
    // }, 1000)
  const fixMiniCart = () =>{
   console.log("BSS fix mini cart")
    setTimeout(()=>{
      BSS_B2B.handleCartCheckoutBtn(JSON.parse($('#bss-b2b-store-data').html()), false, false)
      BSS_B2B.cart.fixer(JSON.parse($('#bss-b2b-store-data').html()), false, false)
     },1000)
  }
  const fixCart = () =>{
    const targetNode = document.querySelector("[data-cart-page-items]");
    const config = { attributes: true, childList: true, subtree: true };
    const callback = (mutationList, observer) => {
      for (const mutation of mutationList) {
        if(mutation.target.classList.contains("cart-item__totals")){
            BSS_B2B.cart.fixer(JSON.parse($('#bss-b2b-store-data').html()), false, false)
        }
      }
    };
    const observer = new MutationObserver(callback);
    observer.observe(targetNode, config);
  }
  if (typeof BSS_B2B !== 'undefined') {
    if (window.location.pathname === '/cart') {
      fixCart()
    }
  }
</script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WCTZV4VB');</script>
<!-- End Google Tag Manager -->

<!-- Start of HubSpot Embed Code -->
<script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/5189439.js"></script>
<!-- End of HubSpot Embed Code -->

<style>
.landing-page .announcement-bar__inner-container, .landing-page .image-banner__container, .landing-page .header__container .header__nav{
    display: none;
}
.landing-page .needsclick {
    display: none;
}
</style>